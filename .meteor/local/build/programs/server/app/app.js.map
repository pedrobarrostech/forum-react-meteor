{"version":3,"sources":["meteor://ğŸ’»app/imports/api/questions.js","meteor://ğŸ’»app/server/main.js"],"names":[],"mappings":";;;;;;;;AAAA,SAAS,KAAT,QAAsB,cAAtB;;AAEA,OAAO,IAAM,YAAY,IAAI,MAAM,UAAV,CAAqB,WAArB,CAAlB;AACP,OAAO,IAAM,mBAAmB,IAAI,MAAM,UAAV,CAAqB,mBAArB,CAAzB;;AAEP,UAAU,KAAV,CAAgB;AACd,UAAQ,gBAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C;AAClD,WAAO,KAAP;AACD,GAHa;AAId,UAAQ,gBAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC5B,WAAO,KAAP;AACD,GANa;AAOd,UAAQ,gBAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC5B,WAAO,KAAP;AACD;AATa,CAAhB;;AAYA,OAAO,OAAP,CAAe;AACb,sBAAoB,yBAAS,IAAT,EAAe;AACjC,QAAI,CAAC,KAAK,MAAV,EAAkB;AAChB,YAAM,IAAI,OAAO,KAAX,CAAiB,gBAAjB,CAAN;AACD;AACD,cAAU,MAAV,CAAiB;AACf,gBADe;AAEf,cAAQ,KAAK,MAFE;AAGf,iBAAW,IAAI,IAAJ,EAHI,EAAjB;AAKD,GAVY;;AAWb,oBAAkB,uBAAS,UAAT,EAAqB;AACrC,cAAU,MAAV,CAAiB,EAAC,KAAK,UAAN,EAAjB,EAAoC;AAClC,YAAM;AACJ,eAAO;AADH;AAD4B,KAApC;AAKD,GAjBY;AAkBb,qBAAmB,wBAAS,UAAT,EAAqB;AACtC,cAAU,MAAV,CAAiB,EAAC,KAAK,UAAN,EAAjB,EAAoC;AAClC,YAAM;AACJ,kBAAU,IAAI,IAAJ;AADN;AAD4B,KAApC;AAKD,GAxBY;AAyBb,uBAAqB,0BAAS,UAAT,EAAqB,IAArB,EAA2B;AAC9C,qBAAiB,MAAjB,CAAwB;AACtB,4BADsB;AAEtB,gBAFsB;AAGtB,iBAAW,IAAI,IAAJ,EAHW,EAAxB;;AAKA,cAAU,MAAV,CAAiB,EAAC,KAAK,UAAN,EAAjB,EAAoC;AAClC,YAAM;AACJ,uBAAe;AADX;AAD4B,KAApC;;;AAOD;;AAtCY,CAAf;;AA0CA,IAAI,OAAO,QAAX,EAAqB;AACnB,SAAO,gBAAP,CAAwB,WAAxB,EAAqC,YAAY;AAC/C,WAAO;AACL,YAAM,gBAAW;AACf,eAAO,UAAU,IAAV,CAAe,EAAf,EAAmB;AACxB,kBAAQ;AACN,oBAAQ,CADF;AAEN,kBAAM,CAFA;AAGN,mBAAO,CAHD;AAIN,2BAAe,CAJT;AAKN,sBAAU;AALJ;AADgB,SAAnB,CAAP;AASD,OAXI;AAYL,gBAAU,CACR;AACE,cAAM,cAAS,QAAT,EAAmB;AACvB,iBAAO,OAAO,KAAP,CAAa,IAAb,CAAkB,EAAC,KAAK,SAAS,MAAf,EAAlB,EAA0C;AAC/C,oBAAQ;AACN,uBAAS;AADH;AADuC,WAA1C,CAAP;AAKD;AAPH,OADQ;AAZL,KAAP;AAwBD,GAzBD;AA0BA,SAAO,gBAAP,CAAwB,UAAxB,EAAoC,UAAU,UAAV,EAAsB;AACxD,WAAO;AACL,YAAM,gBAAW;AACf,eAAO,UAAU,IAAV,CAAe,EAAC,KAAK,UAAN,EAAf,EAAkC,EAAlC,CAAP;AACD,OAHI;AAIL,gBAAU,CACR;AACE,cAAM,cAAS,QAAT,EAAmB;AACvB,iBAAO,iBAAiB,IAAjB,CAAsB,EAAC,YAAY,SAAS,GAAtB,EAAtB,EAAkD,EAAlD,CAAP;AACD;AAHH,OADQ;AAJL,KAAP;AAYD,GAbD;AAcD,gF;;;;;;;;;;;ACpGD,SAAS,MAAT,QAAuB,eAAvB;AACA,OAAO,6BAAP;;AAEA,OAAO,OAAP,CAAe,YAAM;;AAEpB,CAFD,6E","file":"/app.js","sourcesContent":["import { Mongo } from 'meteor/mongo';\n\nexport const Questions = new Mongo.Collection('questions');\nexport const QuestionComments = new Mongo.Collection('question_comments');\n\nQuestions.allow({\n  update: function(userId, doc, fieldNames, modifier) {\n    return false;\n  },\n  insert: function(userId, doc) {\n    return false;\n  },\n  remove: function(userId, doc) {\n    return false;\n  }\n});\n\nMeteor.methods({\n  'questions.create': function(text) {\n    if (!this.userId) {\n      throw new Meteor.Error('not-authorized');\n    }\n    Questions.insert({\n      text,\n      userId: this.userId,\n      createdAt: new Date(), // current time\n    });\n  },\n  'questions.like': function(questionId) {\n    Questions.update({_id: questionId}, {\n      $inc: {\n        likes: 1\n      }\n    });\n  },\n  'questions.solve': function(questionId) {\n    Questions.update({_id: questionId}, {\n      $set: {\n        solvedAt: new Date()\n      }\n    });\n  },\n  'questions.comment': function(questionId, text) {\n    QuestionComments.insert({\n      questionId,\n      text,\n      createdAt: new Date(), // current time\n    });\n    Questions.update({_id: questionId}, {\n      $inc: {\n        commentsCount: 1\n      }\n    });\n    // Questions.update({_id: questionId}, {\n    // });\n  }\n\n});\n\nif (Meteor.isServer) {\n  Meteor.publishComposite('questions', function () {\n    return {\n      find: function() {\n        return Questions.find({}, {\n          fields: {\n            userId: 1,\n            text: 1,\n            likes: 1,\n            commentsCount: 1,\n            solvedAt: 1\n          }\n        });\n      },\n      children: [\n        {\n          find: function(question) {\n            return Meteor.users.find({_id: question.userId}, {\n              fields: {\n                profile: 1\n              }\n            });\n          }\n        }\n      ]\n    }\n  });\n  Meteor.publishComposite('question', function (questionId) {\n    return {\n      find: function() {\n        return Questions.find({_id: questionId}, {});\n      },\n      children: [\n        {\n          find: function(question) {\n            return QuestionComments.find({questionId: question._id}, {});\n          }\n        }\n      ]\n    }\n  });\n}\n","import { Meteor } from 'meteor/meteor';\nimport '../imports/api/questions.js';\n\nMeteor.startup(() => {\n  // code to run on server at startup\n});\n"]}